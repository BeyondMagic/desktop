# -----------------------------------------------
# System devices information
# -----------------------------------------------

# Example
# [[devices]]
# label = "device_name" 		  # Unique label for the device
# machine_id = "machine_id_value" # From `/etc/machine-id`

[[devices]]
label = "computer"
machine_id = "6edffeeb6b9909f86ad4630865c13921"

[[devices]]
label = "laptop"
machine_id = "7faad10195bec8f37d9fbb7a656ff61d"

# -----------------------------------------------
# Plugins for devices
# -----------------------------------------------

# Example
# [[plugins]]
# label = "plugin_name" 		   # Unique label for the plugin
# source = "plugin_source_file"  # Path to the plugin source file/URL
# devices = ["device_name", ...] # List of devices where this plugin should be used

[[plugins]]
label = "dynamic-cursors"
source = "https://github.com/VirtCode/hypr-dynamic-cursors/"
devices = ["computer", "laptop"]

[[plugins]]
label = "hyprsplit"
source = "https://github.com/shezdy/hyprsplit"
devices = ["computer", "laptop"]

# -----------------------------------------------
# Packages
# -----------------------------------------------

# Example:
# [[packages]]
# method = "package_manager" 	   	  # Package manager to use (e.g., pacman, yay, aur, hyprpm)
# label = "package_label" 		   	  # Label of the package (identified by other packages)
# codename = "package_code_name"  	  # Unique key for the package to be used by package manager
# description = "Package description" # Description of the package
# depends_on = ["package_label", ...] # List of packages that must be installed before this one

[[packages]]
method = "pacman"
label = "base-devel"
codename = "base-devel"
description = "Base development tools"
depends_on = []

[[packages]]
method = "pacman"
label = "git"
codename = "git"
description = "Git version control system"
depends_on = []

[[packages]]
method = "pacman"
label = "doas"
codename = "opendoas-retry"
description = "A sudo replacement with retry mechanism"
depends_on = []

[[packages]]
method = "pacman"
label = "turnstile"
codename = "turnstile"
description = "Independent session/login tracker"
depends_on = []

[[packages]]
method = "script"
label = "yay"
codename = "./packages/yay"
description = "AUR helper and package manager"
depends_on = ["pacman", "git", "base-devel"]

[[packages]]
method = "yay"
label = "hyprland"
codename = "hyprland-git"
description = "Hyprland Wayland compositor"
depends_on = []

[[packages]]
method = "hyprpm"
label = "hyprgrass"
codename = "https://github.com/horriblename/hyprgrass"
description = "Hyprland touchscreen gestures support."
depends_on = []

[[packages]]
method = "hyprpm"
label = "dynamic-cursors"
codename = "https://github.com/VirtCode/hypr-dynamic-cursors"
description = "Dynamic cursors for Hyprland."
depends_on = []

[[packages]]
method = "hyprpm"
label = "hyprsplit"
codename = "https://github.com/shezdy/hyprsplit"
description = "Hyprsplit window manager plugin."
depends_on = []

[[packages]]
method = "script"
label = "openscq30"
codename = "./packages/openscq30"
description = "Soundcore headphones and earbuds manager."
depends_on = ["opendoas-retry", "rust"]

[[packages]]
method = "yay"
label = "ags"
codename = "aylurs-gtk-shell-git"
description = "AGS - Aylurs GTK Shell for panels and widgets"
depends_on = []

[[packages]]
method = "yay"
label = "beeper"
codename = "beeper-v4-bin"
description = "Beeper unified messaging desktop client"
depends_on = []

[[packages]]
method = "pacman"
label = "blueman"
codename = "blueman"
description = "Bluetooth management utility for BlueZ"
depends_on = []

[[packages]]
method = "yay"
label = "chartdb"
codename = "chartdb"
description = "Database diagrams editor and viewer"
depends_on = []

[[packages]]
method = "yay"
label = "thunderbird"
codename = "thunderbird"
description = "Email client"
depends_on = []

[[packages]]
method = "script"
label = "hypr-minimize"
codename = "./packages/hypr-minimize"
description = "Toggle sending/receiving an app from a special workspace (minimized) in Hyprland"
depends_on = []

[[packages]]
method = "thunderbird"
label = "minimizeonclose-addon"
codename = "https://github.com/BeyondMagic/thunderbird-minimize-hyprland/releases/download/2.0.2.0-7-gd08f330/minimizeonclose.xpi"
description = "Minimize on close extension for Thunderbird in Hyprland"
depends_on = ["hypr-minimize"]

# -----------------------------------------------
# Profiles for packages per device
# -----------------------------------------------

# Example:
# [[profiles]]
# label = "package_name" 		   # Unique label for the package
# devices = ["device_name", ...]   # List of devices where this package should be installed
# packages = ["package_name", ...] # List of packages to install on the device

[[profiles]]
description = ["Package manager."]
devices = ["computer", "laptop"]

[[profiles]]
description = ["System utilities."]
devices = ["computer", "laptop"]
packages = ["opendoas-retry"]

[[profiles]]
description = ["Hyprland's laptop plugins."]
devices = ["laptop"]
packages = ["hyprgrass"]

[[profiles]]
description = ["Hyprland's plugins."]
devices = ["computer", "laptop"]
packages = ["dynamic-cursors", "hyprsplit"]

[[profiles]]
description = ["Soundcore headphones manager."]
devices = ["computer", "laptop"]
packages = ["openscq30"]

# -----------------------------------------------
# Services for devices
# -----------------------------------------------

# Example
# [[services]]
# label = "service_name" 		      # Unique label for the service
# command = "service_command" 		  # The command to run the service
# description = "Service description" # Concise, but informative description
# depends_on = ["service_name", ...]  # List of services that must be started before this one
# privileged = true/false 			  # Requires elevated permissions
# autostart = ["device_name", ...] 	  # List of devices where this service should autostart
# devices = ["device_name", ...] 	  # List of devices where this service should be able to run
# packages = ["package_name", ...]    # List of packages required for this service

[[services]]
label = "ags"
command = "/usr/local/bin/ags"
description = "Launches AGS shell for panels and widgets"
depends_on = []
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["ags"]

[[services]]
label = "beeper"
command = "/usr/bin/beeper"
description = "Starts the Beeper unified messaging desktop client"
depends_on = ["ags"]
privileged = false
autostart = ["computer"]
devices = ["computer", "laptop"]
packages = ["beeper"]

[[services]]
label = "blueman-applet"
command = "/usr/bin/blueman-applet"
description = "Bluetooth management tray applet for BlueZ"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["blueman"]

[[services]]
label = "chartdb"
command = "~/.local/bin/chartdb"
description = "Runs the local chartdb service"
depends_on = ["ags"]
privileged = false
autostart = ["computer"]
devices = ["computer", "laptop"]
packages = ["chartdb"]

[[services]]
label = "cliphist"
command = "/usr/bin/cliphist"
description = "Wayland clipboard history daemon"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["cliphist"]

[[services]]
label = "dockerd"
command = "/usr/bin/dockerd"
description = "Docker daemon providing container runtime"
depends_on = []
privileged = true
autostart = ["computer"]
devices = ["computer", "laptop"]
packages = ["docker"]

[[services]]
label = "fcitx5"
command = "/usr/bin/fcitx5"
description = "Fcitx5 input method framework"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["fcitx5"]

[[services]]
label = "fprintd"
command = "/usr/bin/fprintd"
description = "Fingerprint reader D-Bus service"
depends_on = []
privileged = true
autostart = []
devices = ["laptop"]
packages = ["fprintd"]

[[services]]
label = "gammastep"
command = "/usr/bin/gammastep"
description = "Adjusts display color temperature based on time/location"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["gammastep"]

[[services]]
label = "gnome-keyring-daemon"
command = "/usr/bin/gnome-keyring-daemon"
description = "GNOME Keyring secrets, SSH, and PGP agent"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["gnome-keyring"]

[[services]]
label = "iio-sensor-proxy"
command = "/usr/bin/iio-sensor-proxy"
description = "Exposes accelerometer and ambient light sensors via D-Bus"
depends_on = ["ags"]
privileged = false
autostart = ["laptop"]
devices = ["laptop"]
packages = ["iio-sensor-proxy"]

[[services]]
label = "keyd"
command = "/usr/bin/keyd"
description = "Low-level keyboard remapping daemon"
depends_on = ["ags"]
privileged = true
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["keyd"]

[[services]]
label = "nm-applet"
command = "/usr/bin/nm-applet"
description = "NetworkManager system tray applet"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["networkmanager"]

[[services]]
label = "pipewire"
command = "/usr/bin/pipewire"
description = "PipeWire multimedia daemon"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["pipewire"]

[[services]]
label = "pipewire-pulse"
command = "/usr/bin/pipewire-pulse"
description = "PulseAudio-compatible server on PipeWire"
depends_on = ["pipewire"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["pipewire-pulse"]

[[services]]
label = "polkit-gnome-authentication-agent-1"
command = "/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1"
description = "Polkit authentication agent for graphical prompts"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["polkit-gnome"]

[[services]]
label = "python3-validity"
command = "/usr/local/bin/python3-validity"
description = "Validity fingerprint driver userspace helper"
depends_on = ["fprintd"]
privileged = true
autostart = []
devices = ["laptop"]
packages = ["python-validity"]

[[services]]
label = "rclone"
command = "/usr/bin/rclone"
description = "Rclone remote storage sync/mount daemon"
depends_on = []
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["rclone"]

[[services]]
label = "ssh-agent"
command = "/usr/bin/ssh-agent"
description = "SSH key agent providing keys to clients"
depends_on = []
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["openssh"]

[[services]]
label = "awww"
command = "/usr/bin/awww"
description = "Runs the awww wallpaper fetcher/rotator"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["awww-git"]

[[services]]
label = "syncthing"
command = "/usr/bin/syncthing"
description = "Syncthing peer-to-peer file synchronization daemon"
depends_on = []
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["syncthing"]

[[services]]
label = "thunderbird"
command = "/usr/bin/thunderbird"
description = "Mozilla Thunderbird email and calendar client"
depends_on = ["ags"]
privileged = false
autostart = ["computer"]
devices = ["computer", "laptop"]
packages = ["thunderbird"]

[[services]]
label = "waydroid"
command = "/usr/bin/waydroid"
description = "Waydroid Android container/session"
depends_on = ["ags"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["waydroid"]

[[services]]
label = "wireplumber"
command = "/usr/bin/wireplumber"
description = "PipeWire session manager for policy and routing"
depends_on = ["pipewire"]
privileged = false
autostart = ["computer", "laptop"]
devices = ["computer", "laptop"]
packages = ["wireplumber"]

# -----------------------------------------------
# Synchronization for devices
# -----------------------------------------------

# To-do: think of a better way to manage synchronization configurations

# Example:
# [[synchronization]]
# type = "sync_type" 			   	   # Type of synchronization (e.g., rclone, syncthing)
# description = "Sync description" 	   # Description of the synchronization
# remote = "remote_name:" 			   # Remote name or identifier
# mount = "local_mount_point" 	       # Local mount point or directory, supports tilde for user's home dir

[[synchronization]]
type = "rclone"
description = "Google Drive storage"
remote = "gdrive:"
mount = "~/storage/gdrive"

[[synchronization]]
type = "syncthing"
description = "Inter-desktop files"
remote = "dream"
mount = "~/storage/shared"
